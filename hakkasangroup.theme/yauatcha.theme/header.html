<header>

  <div class="location">
    <a href="<%= data.location_website %>" class="location">

      <img width="60" height="29" src="https://2020-assets.yauatcha.com/wp-content/uploads/2020/09/18202425/YAU_Logo_Vertical_Pink_WEB-ONLY.svg" class="narrow_only" alt="Yautcha Logo Vertical Pink" loading="lazy">

      <svg class="wide_only" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="224px" height="17.5px" viewBox="0 0 576 44.937" style="enable-background:new 0 0 576 44.937; fill: #e85e9d;" xml:space="preserve">
<g>
	<g>
		<g>
			<polygon points="402.648,6.374 402.648,44.211 397.942,44.211 397.942,6.374 387.754,6.374 387.754,2.015      412.933,2.015 412.933,6.374    "></polygon>
			<path d="M464.476,5.425v5.82c-3.359-3.472-7.996-5.594-12.874-5.594c-9.395,0-17.008,8.169-17.008,17.459     c0,9.29,7.669,17.463,17.131,17.463c4.755,0,9.393-2.242,12.751-5.602v5.82c-3.638,2.638-8.119,4.146-12.587,4.146     c-11.924,0-21.997-9.689-21.997-21.66c0-12.085,9.912-21.993,21.997-21.993C456.581,1.283,460.736,2.624,464.476,5.425"></path>
			<polygon points="491.895,19.137 513.493,19.137 513.493,2.015 518.201,2.015 518.201,44.211 513.493,44.211      513.493,23.501 491.895,23.501 491.895,44.211 487.189,44.211 487.189,2.015 491.895,2.015    "></polygon>
			<path d="M549.706,27.873l7.211-16.909l7.048,16.909H549.706z M557.03,0l-19.474,44.211h5.15l5.1-11.977h18.012     l4.983,11.977H576L557.03,0z"></path>
			<polygon points="203.315,26.072 189.494,2.015 194.923,2.015 205.661,20.817 216.411,2.015 221.842,2.015      208.016,26.072 208.016,44.211 203.315,44.211    "></polygon>
			<path d="M244.774,27.873l7.225-16.909l7.046,16.909H244.774z M252.106,0l-19.468,44.211h5.142l5.09-11.977h18.024     l4.981,11.977h5.209L252.106,0z"></path>
			<path d="M293.968,2.015v25.128c0,3.13-0.113,6.721,1.853,9.403c1.849,2.571,5.427,4.027,8.504,4.027     c3.025,0,6.32-1.408,8.284-3.753c2.228-2.694,2.065-6.376,2.065-9.677V2.015h4.697v26.409c0,4.59-0.333,8.232-3.694,11.696     c-2.904,3.134-7.096,4.809-11.353,4.809c-3.975,0-8.064-1.508-10.91-4.305c-3.7-3.527-4.152-7.383-4.152-12.2V2.015H293.968z"></path>
			<path d="M350.486,27.873l7.227-16.909l7.04,16.909H350.486z M357.816,0l-19.478,44.211h5.15l5.088-11.977H366.6     l4.983,11.977h5.207L357.816,0z"></path>
		</g>
	</g>
	<g>
		<polygon points="129.068,13.035 129.068,9.686 118.755,9.686 118.755,5.927 129.068,5.927 129.068,2.115     133.426,2.115 133.426,5.927 138.558,5.927 138.558,9.686 133.426,9.686 133.426,13.035   "></polygon>
		<path d="M132.782,28.942c-1.436-1.583-2.926-2.989-4.447-4.215c-0.244-0.184-0.549-0.424-0.917-0.734l0.869-1.646    l0.645-1.657h6.197C134.726,23.993,133.944,26.74,132.782,28.942 M130.352,16.883l0.718-2.612l-3.761-1.004    c-1.307,4.13-2.5,7.048-3.767,9.236c-1.272,2.176-2.878,4.263-4.84,6.209l2.845,3.265c0.734-0.647,1.42-1.395,2.067-2.248    l1.736-2.39c1.014,0.766,1.934,1.589,2.751,2.48l2.581,2.843c-3.465,3.793-7.516,6.275-12.162,7.437l2.795,3.934    c0.462,0,1.797-0.571,3.997-1.72c2.196-1.139,4.154-2.47,5.864-3.961c4.406-3.785,7.064-9.157,7.986-16.098l0.175-2.21v-3.16    H130.352z"></path>
		<path d="M82.235,15.16c-5.164,4.586-11.48,8.119-18.938,10.593l-2.113-3.985c4.253-1.28,7.677-2.601,10.278-3.944    c2.601-1.345,5.364-3.233,8.296-5.646h4.864c5.019,4.071,11.242,7.233,18.667,9.498l-1.966,4.253    C93.334,22.973,86.976,19.387,82.235,15.16"></path>
		<path d="M84.486,20.323v5.463H98.43v3.799h-9.631c1.589,1.901,3.424,3.519,5.501,4.862    c2.085,1.347,5.104,2.678,9.085,3.991l-2.16,4.217c-4.307-1.706-7.693-3.525-10.161-5.463c-2.454-1.914-4.648-4.458-6.578-7.608    v14.63h-4.267V29.631c-2.295,3.586-4.59,6.217-6.903,7.915c-2.309,1.702-5.523,3.372-9.653,5.015l-2.472-3.842    c6.538-2.111,11.444-5.155,14.717-9.133H65.818v-3.799h14.402v-5.463H84.486z"></path>
		<polygon points="88.428,13.035 88.428,9.686 83.342,9.686 83.342,5.927 88.428,5.927 88.428,2.115 92.784,2.115     92.784,5.927 103.107,5.927 103.107,9.686 92.784,9.686 92.784,13.035   "></polygon>
		<polygon points="71.735,13.035 71.735,9.686 61.414,9.686 61.414,5.927 71.735,5.927 71.735,2.115 76.095,2.115     76.095,5.927 81.225,5.927 81.225,9.686 76.095,9.686 76.095,13.035   "></polygon>
		<path d="M157.001,28.349c0,1.565-0.329,2.736-0.992,3.529c-0.655,0.797-2.012,1.196-4.057,1.196h-2.706l-1.008-4.317    l3.212,0.184c1.01,0,1.514-0.48,1.514-1.466v-6.739h-7.431v17.889c0,1.063,0.524,1.603,1.555,1.603h7.252    c0.732,0,1.192-0.224,1.377-0.665c0.181-0.442,0.365-2.295,0.548-5.525l4.08,1.188c-0.545,4.836-1.156,7.538-1.805,8.119    c-0.665,0.581-1.94,0.867-3.837,0.867h-8.849c-1.533,0-2.672-0.357-3.446-1.071c-0.762-0.718-1.147-2.128-1.147-4.201V16.883    h15.739V28.349z"></path>
		<polygon points="145.763,13.035 145.763,9.686 140.671,9.686 140.671,5.927 145.763,5.927 145.763,2.115     150.119,2.115 150.119,5.927 160.438,5.927 160.438,9.686 150.119,9.686 150.119,13.035   "></polygon>
		<g>
			<path d="M7.836,21.333v0.663c0,7.846-1.343,15.054-4.033,21.624L0,40.194c1.347-3.251,2.285-6.459,2.817-9.619     c0.532-3.156,0.797-7.27,0.797-12.337V17.58V17.02c0-0.561-0.006-1.087-0.02-1.571c-0.02-0.484-0.026-0.929-0.026-1.341V4.259     h17.455c-0.095-0.189-0.157-0.327-0.19-0.423c-0.464-1.03-0.922-1.811-1.359-2.347l4.737-0.377l0.938,1.549     c0.379,0.718,0.609,1.25,0.7,1.597h17.365v3.709H26.51v3.097h13.325v6.566h3.38v3.701h-3.38v6.661H26.51v2.868h13.465v13.352     h-4.507v-1.537H15.207v1.537h-4.505V30.862h11.631v-2.868H10.137v-3.608h12.196v-3.053H7.836z M7.836,17.631h14.497v-3.007     H10.137v-3.559h12.196V7.968H7.836V17.631z M35.469,34.465H15.207v4.555h20.262V34.465z M26.51,17.631h9.195v-3.007H26.51V17.631     z M35.705,24.386v-3.053H26.51v3.053H35.705z"></path>
		</g>
	</g>
</g>
</svg></a>
  </div>

  <div class="hamburger narrow_only">
    <a id="hamburger-button" href="javascript:void(0);" title="Main Menu" class="toggle">
      <span></span><span></span><span></span>
    </a>
  </div>

  <div class="wide_header_nav_links wide_only">
  <%=
    def simple_fetch(location_path:)
      Nokogiri::HTML(
        # Fetch this URL.
        open(URI.join('https://yauatcha.com', location_path))
      # Extract this part of it to a string.
      ).css('.jet-menu').to_s
    end

    # Supports HTTP Basic over SSL
    def password_fetch(location_path:)
      require 'net/http'
      require 'openssl'
      uri = URI("https://yauatcha.com/#{location_path}/")
      puts "FETCHING: #{uri}"
      Net::HTTP.start(uri.host, uri.port,
        :use_ssl => uri.scheme == 'https',
        :verify_mode => OpenSSL::SSL::VERIFY_NONE) do |http|

        request = Net::HTTP::Get.new uri.request_uri
        request.basic_auth 'admin', 'hkadmin'

        response = http.request request # Net::HTTPResponse object

        puts response
        return Nokogiri::HTML(response.body).css('.jet-menu').to_s
      end

    end

    def massage(html:)
      nav_links = Nokogiri::HTML( html )

      # Remove the last two items.
      links = nav_links.css('ul.jet-menu > li')
      links[links.size - 2].remove

      # Fix relative URLs.
      nav_links.search('a').each do |link|
        if link['href'] =~ /^\//
          link['href'] =
            URI.join('https://yauatcha.com', link['href'])
        end
      end

      nav_links.css('ul.jet-menu').to_s
    end

    # Grab the navigation links from the main site and massage them a little.
    case location_id
    when /yauatcha-soho-0/i
      massage( html: password_fetch( location_path: 'soho' ) )
    when /yauatcha-city/i
      massage( html: password_fetch( location_path: 'city' ) )
    end
  %>
  </div>

</header>

<script>
  document.getElementById('hamburger-button').onclick = function() {
    var hamburgerMenu = document.getElementById('hamburger-menu')
    var className = ' ' + hamburgerMenu.className + ' ';
    hamburgerMenu.className = ~className.indexOf(' active ') ?
                         className.replace(' active ', ' ') :
                         hamburgerMenu.className + ' active';
}
  window.addEventListener("scroll", event => {
    document.getElementById('hamburger-menu').className = "";
  });
</script>
